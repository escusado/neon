"undefined"==typeof global&&(global=window),global.Interface=function(e,t){var n,i,s;return n=e&&t?e:this,i=e&&t?t:e?e:"interface"+Math.random().toString(),s=function(e){return e.isInterface=!0,e.name=i,n[i]=e,n[i]}},global.Module=function(e,t){var n,i,s,r;return n=e&&t?e:this,i=e&&t?t:e?e:"module"+Math.random().toString(),r={moduleName:i,prototype:{},__includedModules:[],include:function(e){var t;for(t in e)e.hasOwnProperty(t)&&"prototype"!==t&&"isModule"!==t&&"__includedModules"!==t&&"include"!==t&&"moduleName"!==t&&(r[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(r.prototype[t]=e.prototype[t]);else e.prototype={};return this.__includedModules.push(e),this}},s=function(e){var t;r.isModule=!0;for(t in e)e.hasOwnProperty(t)&&"prototype"!==t&&"isModule"!==t&&"__includedModules"!==t&&"include"!==t&&"moduleName"!==t&&(r[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(r.prototype[t]=e.prototype[t]);return n[i]=r,n[i]},s.includes=function(){for(var e=0;e<arguments.length;e++)r.include(arguments[e]);return s},s},global.Class=function(e,t){var n,i,s;return n=e&&t?e:global,t=e&&t?t:e?e:"class"+Math.random().toString(),i=function(){this.init&&this.init.apply(this,arguments)},i.__descendants=[],i.__implementedInterfaces=[],i.__includedModules=[],i.className=t,i.include=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"prototype"!=t&&"constructor"!=t&&"isModule"!=t&&"superClass"!=t&&"include"!=t&&(i[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(i.prototype[t]=e.prototype[t]);else e.prototype={};return i.__includedModules.push(e),this},s=function(e){var s,r,o,a,h,d=e.prototype;if(d){for(h in d)d.hasOwnProperty(h)&&(i.prototype[h]=d[h]);delete e.prototype}for(h in e)e.hasOwnProperty(h)&&(i[h]=e[h]);for(s=0,r=i.__implementedInterfaces.length;r>s;s++){for(o=0,a=i.__implementedInterfaces[s].constructor.length;a>o;o++)if(!i[i.__implementedInterfaces[s].constructor[o]]){console.log("must implement static "+i.__implementedInterfaces[s].name);break}if(i.__implementedInterfaces[s].hasOwnProperty("prototype")&&i.__implementedInterfaces[s].prototype)for(o=0,a=i.__implementedInterfaces[s].prototype.length;a>o;o++)if(!i.prototype[i.__implementedInterfaces[s].prototype[o]]){console.log("must implement prototype "+i.__implementedInterfaces[s].name);break}}try{Li&&Li.ObjectSpy&&Li.Spy&&(i.__objectSpy=new Li.ObjectSpy,i.__objectSpy.spy(i),i.__objectSpy.spy(i.prototype))}catch(l){}return n[t]=i,i},s.inherits=function(e){var t,n;i.superClass=e,e.hasOwnProperty("__descendants")&&e.__descendants.push(i),n=function(){},n.prototype=e.prototype,i.prototype=new n,i.prototype.constructor=i;for(t in e)e.hasOwnProperty(t)&&"prototype"!=t&&"className"!==t&&"superClass"!==t&&"include"!==t&&"__descendants"!=t&&(i[t]=e[t]);return delete this.inherits,this},s.ensures=function(){for(var e=0;e<arguments.length;e++)i.__implementedInterfaces.push(arguments[e]);return delete this.ensures,s},s.includes=function(){for(var e=0;e<arguments.length;e++)i.include(arguments[e]);return s},s},Class("CustomEvent")({prototype:{bubbles:!0,cancelable:!0,currentTarget:null,timeStamp:0,target:null,type:"",isPropagationStopped:!1,isDefaultPrevented:!1,isImmediatePropagationStopped:!1,areImmediateHandlersPrevented:!1,init:function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])},stopPropagation:function(){this.isPropagationStopped=!0},preventDefault:function(){this.isDefaultPrevented=!0},stopImmediatePropagation:function(){this.preventImmediateHandlers(),this.stopPropagation()},preventImmediateHandlers:function(){this.areImmediateHandlersPrevented=!0}}}),Module("CustomEventSupport")({eventListeners:null,bind:function(e,t){var n,i,s;for(this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),n=!1,s=this.eventListeners[e],i=0;i<s.length;i++)if(s[i]===t){n=!0;break}return n||this.eventListeners[e].push(t),this},unbind:function(e,t){var n,i,s;for(i=!1,this.eventListeners||(this.eventListeners={}),"undefined"==typeof t&&(this.eventListeners[e]=[]),s=this.eventListeners[e],n=0;n<s.length;n++)if(s[n]===t){i=!0;break}return i&&this.eventListeners[e].splice(n,1),this},dispatch:function(e,t){var n,i,s,r;for(null===this.eventListeners&&(this.eventListeners={}),"undefined"==typeof t&&(t={}),t.hasOwnProperty("target")===!1&&(t.target=this),n=new CustomEvent(e,t),i=this.eventListeners[e]||[],s=this,r=0;r<i.length&&(i[r].call(s,n),n.areImmediateHandlersPrevented!==!0);r+=1);return n},prototype:{eventListeners:null,bind:function(e,t){var n,i,s;for(this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),n=!1,s=this.eventListeners[e],i=0;i<s.length;i++)if(s[i]===t){n=!0;break}return n||this.eventListeners[e].push(t),this},unbind:function(e,t){var n,i,s;for(i=!1,n=0,this.eventListeners||(this.eventListeners={}),"undefined"==typeof t&&(this.eventListeners[e]=[]),s=this.eventListeners[e],n=0;n<s.length;n++)if(s[n]==t){i=!0;break}return i&&this.eventListeners[e].splice(n,1),this},dispatch:function(e,t){var n,i,s,r;for(null===this.eventListeners&&(this.eventListeners={}),"undefined"==typeof t&&(t={}),t.hasOwnProperty("target")===!1&&(t.target=this),n=new CustomEvent(e,t),i=this.eventListeners[e]||[],s=this,r=0;r<i.length&&(i[r].call(s,n),n.areImmediateHandlersPrevented!==!0);r+=1);return n}}}),Module("NodeSupport")({prototype:{parent:null,children:[],appendChild:function(e){return e.parent&&e.parent.removeChild(e),this.hasOwnProperty("children")||(this.children=[]),this.children.push(e),this[e.name]=e,e.setParent(this),e},insertBefore:function(e,t){var n;return e.parent&&e.parent.removeChild(e),this.hasOwnProperty("children")||(this.children=[]),"undefined"==typeof t?this.appendChild(e):(n=this.children.indexOf(t),this.children.splice(n,0,e),this[e.name]=e,e.setParent(this)),e},insertChild:function(e,t){return console.warn("NodeSupport insertChild method is deprecated, try insertBefore"),e.parent&&e.parent.removeChild(e),this.hasOwnProperty("children")||(this.children=[]),"undefined"==typeof t?(this.children.push(e),this[e.name]=e,e.setParent(this),e):(this.children.splice(t,0,e),this[e.name]=e,e.setParent(this),e)},removeChild:function(e){var t=this.children.indexOf(e);return-1!==t&&(this.children.splice(t,1),delete this[e.name],e.parent=null),e},setParent:function(e){return this.parent=e,this},getDescendants:function(){var e=[];return this.children.forEach(function(t){e.push(t)}),this.children.forEach(function(t){e=e.concat(t.getDescendants())}),e},getPreviousSibling:function(){return"undefined"!=typeof this.parent&&this.parent.children[0]!==this?this.parent.children[this.parent.children.indexOf(this)-1]:void 0},getNextSibling:function(){return"undefined"!=typeof this.parent&&this.parent.children[this.parent.children.length-1]!==this?this.parent.children[this.parent.children.indexOf(this)+1]:void 0}}}),Class("Widget").includes(CustomEventSupport,NodeSupport)({HTML:"<div></div>",ELEMENT_CLASS:"widget",prototype:{active:!1,disabled:!1,__destroyed:!1,init:function(e){var t;Object.keys(e||{}).forEach(function(t){this[t]=e[t]},this),null==this.element&&(t=document.createElement("div"),t.innerHTML=this.constructor.HTML.replace(/\s\s+/g,""),this.element=t.firstChild,this.constructor.ELEMENT_CLASS.split(" ").forEach(function(e){this.element.classList.add(e)},this),t=null),this.hasOwnProperty("className")===!0&&this.className.split(" ").forEach(function(e){this.element.classList.add(e)},this)},_activate:function(){this.active=!0,this.element.classList.add("active")},activate:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeActivate"),this._activate(),this.dispatch("activate"),this},_deactivate:function(){this.active=!1,this.element.classList.remove("active")},deactivate:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeDeactivate"),this._deactivate(),this.dispatch("deactivate"),this},_enable:function(){this.disabled=!1,this.element.classList.remove("disable")},enable:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeEnable"),this._enable(),this.dispatch("enable"),this},_disable:function(){this.disabled=!0,this.element.classList.add("disable")},disable:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeDisable"),this._disable(),this.dispatch("disable"),this},_destroy:function(){var e;if(this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),null!==this.children)for(e=this.children.length;e>0;)this.children[0].destroy(),this.children.length===e&&this.children.shift(),e--;this.parent&&this.parent.removeChild(this),this.children=null,this.element=null},destroy:function(){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeDestroy"),this._destroy(),this.dispatch("destroy"),this.eventListeners=null,this.__destroyed=!0,null},render:function(e,t){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeRender",{element:e,beforeElement:t}),t?e.insertBefore(this.element,t):e.appendChild(this.element),this.dispatch("render"),this}}});